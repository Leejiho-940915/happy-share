### DB modeling FeedBack (21.10.15) ###


## 공통 준비사항 ##

 	- repo 아래에 폴더 생성 (docs - dbmodel - data, ddl, model.exerd)


## 행복하share 피드백 ##

# 회원 - 테이블 연결

	- 각각의 회원'만' 수행하는 테이블부터 정리하기 -> 전체 회원으로 확대해가면서 생각하기
	- 포인트 별도의 테이블로 분리 x -> 개인 테이블로 포함
	 (but 비슷한 경우에 금전적인 문제 등이 관련되어 있다면 별도의 테이블로 분리해서 관리해야 함)

# 관리자 모델

	- 권한테이블로 분리 OR 권한을 컬럼으로?

# 일관성

	- [봉사신청]의 남은인원/모집인원의 총합과 [봉사]의 총모집인원 데이터가 일치하지 않을 위험 -> 일관성 해침
	- 계산된 결과를 컬럼으로 넣을 필요가 x , 총 모집인원에서 즉각 뽑아오는 개념으로 인지하고 수정

# 첨부파일

	- 게시판별로 각각 첨부파일 테이블 있는 개념 O

# 봉사 후기

	- 회원 테이블과 직접 연결 X -> 봉사참여자와 연결하는 방향으로 수정

# 챌린지

	- select distinct 회원번호 from 챌린지후기 
  	   -> 중복제거, 회원번호만 추출하도록(한 회원이 여러 개의 챌린지 참여, 후기 작성했을 경우 대비)
	
# 기부금

	- group by ~ having절로 회원별 기부금, order by로 기부금 랭킹 등 sql문 활용 

# 답글

	- 별도의 테이블 -> [문의하기] 내 컬럼으로 이동
	- 휴면회원 추가 or not -> [회원] 테이블에 '마지막 접속일' 컬럼 추가하고 상태 컬럼 활용



## 스터디위더스 피드백 ##

# 회원
	
	- 팀장, 팀원, 권한 테이블 삭제
	(권한 테이블은 상황에 따라 존재해도 됨 - ex. 엄격하게 구분해야 하는 경우 등/ but 지금은 간소화된 방향으로 진행)
	
# 멘토신청서

	- 삭제 -> 멘토 테이블로 컬럼 all 이동(승인여부에 따라서 멘토가 정해짐)

# 회원 - 멘토 관계
	
	- 방향 및 0 or 1로 재설정(실수인듯?)

# 멘티

	- 회원번호 & 스터디번호 묶어서 pk로 설정
	(한 명의 회원이 여러 개의 스터디를 신청할 수는 있으나, 한 명의 회원이 하나의 스터디를 재신청할 수 없어서)

# 유/무료 스터디 테이블 통합 + 컬럼 추가/삭제
	
	- 금액 컬럼 추가, 금액 조건이 0인지 아닌지에 따라 유, 무료를 구분짓는 방향으로(프로그래밍 조건으로 해결)

	- 결제취소여부 삭제 -> 결제상태로 통합 (미결제, 결제완료로 구분하고 조건으로 활용하는 식으로 진행해야 할 듯?)

# 관심스터디

	- 스터디 테이블 통합에 따라 관심목록도 하나의 테이블로 통합됨 (회원번호 & 스터디번호 결합해서 pk로 지정)
	- 테이블명은 xx목록이라는 표현 지양
	- 관심스터디 내 유/무료 구분은 스터디 테이블의 금액으로 WHERE절 활용(금액=0이면 유료스터디)
	
# 스터디 상태
	
	- 별도의 테이블 x -> 스터디 테이블의 컬럼으로 재구성
	
# 회원과 스터디 관계
	
	- 스터디와 회원 테이블 다이렉트로 연결 (멘티 테이블 x )



## J & eom QnA ##

* DB에서는 테이블을 최대한 간소화하고, 프로그래밍으로 구분하고 다룰 수 있는 문제는 프로그래밍의 영역으로 남겨두기
		-> 완벽 ㄴㄴ 최소한의 제약조건을 준다(필터링)는 느낌으로 DB모델링 할 것, 메인은 프로그래밍
	
* 테이블과 무관하게 핸들러는 현재 나누어진 상태를 유지해서 프로그래밍을 진행해도 됨
		(실무에서도 상황에 따라 달라지나, 현재는 팀프로젝트 효율성을 위해 이 방향으로 진행하기로)
	
* 하나의 정보를 기존 테이블의 컬럼으로 넣어야 할 지, 별도의 테이블로 분리해야 할 지 판단하는 기준?
		-> 다른 곳에서 데이터로 활용되는 정보인지 아닌지를 기준으로 생각해볼 것

* 웹사이트에서 게시판별로 일련번호가 부여되는 것 X -> 각각의 게시판 구분 없이 일련번호가 부여되는 개념
		-> 별로 신경 ㄴㄴ 어차피 대부분의 경우 상세보기, 댓글에는 번호가 출력되지 않음
		-> 콘솔에서는 게시글 번호가 많이 활용되었는데, 웹으로 넘어가면서 그닥 중요하지 않은 개념인듯



## 주류파인더 피드백 ##

- 위의 두 조와 중복되는 피드백이라 생략함
	 


## 오늘의공부 피드백 ##

# 관리자

	- 관리자 피드백은 우리랑 같은 맥락 
		(공지사항에 관리자 정보가 필요 X -> 관리자 테이블과 연결 끊음, 관리자 테이블 삭제)


# 사장/ 회원

	- 회원가입 시 애초에 구분해서 가입해서 각각의 테이블로 구분되어도 OK

# 결제 / 결제유형 / 결제현황

	- 스터디카페예약이 결제 참조 x -> 결제가 스터디카페예약 참조로 관계 변경

# 리뷰

	- 스터디카페 테이블과 연결 X -> 스터디카페예약 테이블과 스터디룸 테이블과 JOIN해서 정보 가져오는 방향으로
		(스터디룸과 연결되면 스터디카페와 연결될 필요 X)

	- 리뷰에서 스터디카페번호 컬럼이 따로 존재할 시, 리뷰의 스터디카페번호와 스터디룸의 스터디카페번호 컬럼이 일치하지 않을 위험성이 있음 -> 일관성 해침
		(리뷰에서 컬럼 삭제, 스터디카페번호의 컬럼을 즉각 가져오는 방향으로 수정 // 해피쉐어 피드백과 동일한 맥락인듯)


# 답변

	- 답변내용, 답변일 문의게시판의 컬럼으로 이동 후 답변 테이블 삭제

	- 답변제목 NOT NULL으로 설정 X (DB 한계) -> 프로그래밍에서 조건문 부여



## MySeoul 피드백 ##

# 테마 / 테마 신고 / 유저 신고 / 유저

	- 유저, 테마, 테마 신고 테이블 연결 (관계 재설정)

	- 신고상태에 신고상태번호 PK로 추가, 테마 신고와 연결

	- 신고자, 피신고자 unique key 지정(중복ㄴㄴ해야되니께)

	- 테이블 4개 JOIN해야하는듯?



## 논의할 내용 ##

- 비고 추가 (승인 거절 이유, 휴면회원) -> OK

- 컬럼 하나로 합칠 수 있는 부분 고려하기(괜히 테이블로 따로 뺀 부분 없는지 체크) -> OK

- 댓글, 블랙리스트 테이블 추가

- 멘토로 시작하기 구현 or NOT
	(구현하게 되면 테이블 구성에 변화 주어야 할 듯)

- 웹에서 투두리스트 구현하는 방향